<!-- components/conversation/conversation.component.html -->
<div class="flex flex-col h-full">
    <!-- Header -->
    <div class="flex items-center p-4 border-b border-gray-200 dark:border-gray-700">
      <button mat-icon-button routerLink="./">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <div class="ml-2 flex items-center">
        <mat-icon class="mr-2">account_circle</mat-icon>
        <div>
          <div class="font-medium">{{chat?.contact?.name}}</div>
          <div class="text-sm text-gray-500">Online</div>
        </div>
      </div>
      <button mat-icon-button class="ml-auto">
        <mat-icon>more_vert</mat-icon>
      </button>
    </div>
  
    <!-- Messages -->
    <div class="flex-1 overflow-y-auto p-4">
      <div *ngFor="let message of chat?.messages; trackBy: trackByFn" 
           class="mb-4"
           [class.text-right]="message.isMine">
        <div class="inline-block p-3 rounded-lg max-w-xs"
             [class.bg-primary]="message.isMine"
             [class.text-white]="message.isMine"
             [class.bg-gray-200]="!message.isMine"
             [class.dark:bg-gray-700]="!message.isMine">
          {{message.value}}
        </div>
        <div class="text-xs mt-1 text-gray-500">
          {{message.createdAt | date:'shortTime'}}
        </div>
      </div>
    </div>
  
    <!-- Message input -->
    <div class="p-4 border-t border-gray-200 dark:border-gray-700">
      <div class="flex items-center">
        <button mat-icon-button>
          <mat-icon>insert_emoticon</mat-icon>
        </button>
        <button mat-icon-button>
          <mat-icon>attach_file</mat-icon>
        </button>
        <mat-form-field class="flex-1 mx-2">
          <textarea matInput placeholder="Type a message" cdkTextareaAutosize #messageInput></textarea>
        </mat-form-field>
        <button mat-icon-button color="primary">
          <mat-icon>send</mat-icon>
        </button>
      </div>
    </div>
  </div>